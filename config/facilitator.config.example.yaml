# x402-tron-facilitator config

database:
  url: ""
  # --- Local Development Fallbacks ---
  # If provided, these values will be used to bypass 1Password retrieval for database password
  # password: ""
  # --- Connection pool (optional) ---
  # ssl_mode: "disable"          # disable | require | verify-ca | verify-full
  # max_open_conns: 25           # max connections in pool (pool_size + max_overflow)
  # max_idle_conns: 15           # connections to keep open when idle (pool_size)
  # max_life_time: 600           # seconds before recycling a connection (pool_recycle)

# 1Password: each value is "vault/item/field" (op:// style). Set OP_SERVICE_ACCOUNT_TOKEN when using.
onepassword:
  tron_nile_private_key: ""
  tron_mainnet_private_key: ""
  bsc_testnet_private_key: ""
  bsc_mainnet_private_key: ""
  database_password: ""
  trongrid_api_key: ""

server:
  host: "0.0.0.0"
  port: 8001
  # uvicorn workers; 1 async worker typically handles ~100 settle QPS (I/O-bound). Use 2 for headroom.
  workers: 1

logging:
  dir: "logs"
  filename: "x402-facilitator.log"
  level: "INFO"

rate_limit:
  api_key_refresh_interval: 60
  authenticated: "1000/minute"
  anonymous: "1/minute"

monitoring:
  port: 9001
  endpoint: "/metrics"

facilitator:
  # Shared across all networks (same level as networks)
  trongrid_api_key: ""

  # Per-network config. Key = network id; listed = enabled. Each has fee_to_address, base_fee, private_key.
  networks:
    tron:nile:
      fee_to_address: ""
      base_fee:
        USDT: 100              # 0.0001 USDT (6 decimals)
        USDD: 100000000000000  # 0.0001 USDD (18 decimals)
      private_key: ""          # or use 1Password: onepassword.<network> = "vault/item/field"
    tron:mainnet:
      fee_to_address: ""
      base_fee:
        USDT: 100
        USDD: 100000000000000
      private_key: ""
    bsc:testnet:
      fee_to_address: ""
      base_fee:
        USDC: 100
      private_key: ""
    bsc:mainnet:
      fee_to_address: ""
      base_fee:
        EPS: 100
      private_key: ""
